<% @posts.each do |post| %>
	
	<div class="post-index-individual">

		<span id="<%= post.id %>" class="votes">
			<% if current_user && current_user.voted?(post) %>
				<%= link_to(edit_post_vote_path(post, VoteHelper.find_vote(@votes, post)), method: :put, class: "#{VoteHelper.find_vote(@votes, post)}", remote: true ) do %>
					<div class="post-upvote"></div>
				<% end %>
			<% else %>
				<%= link_to(post_votes_path(post), method: :post, remote: true ) do %>
					<div class="post-upvote"></div>
				<% end %>
			<% end %>

			<div class="post-vote-count">
				<%= Vote.tally(post.id, post.class) %> points
			</div>

			<% if current_user && current_user.voted?(post) %>
				<%= link_to(edit_post_vote_path(post, VoteHelper.find_vote(@votes, post)), method: :put, class: "#{VoteHelper.find_vote(@votes, post)}", remote: true ) do %>
					<div class="post-downvote"></div>
				<% end %>
			<% else %>
				<%= link_to(post_votes_path(post), method: :post, remote: true ) do %>
					<div class="post-downvote"></div>
				<% end %>
			<% end %>
		</span>

		<ul class="post-index">
			<li>Username: <%= post.user.username %> </li>
			<li>Posted on: <%= post.created_at %></li>
			<li><%= post.text %></li>
			<li>
				<% if post.comments != nil %>
					<%= post.comments.count %> comments
				<% else %> 
						0 comments
				<% end %>
			</li>
		</ul>
	</div>

<% end %>
	
